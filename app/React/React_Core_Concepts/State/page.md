# 3. State in React

**State** рж╣ржЪрзНржЫрзЗ ржХрзЛржирзЛ Component-ржПрж░ ржнрзЗрждрж░рзЗ ржерж╛ржХрж╛ **local data**, ржпрзЗржЯрж╛ рж╕ржорзЯрзЗрж░ рж╕рж╛ржерзЗ ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣рждрзЗ ржкрж╛рж░рзЗред React Component ржпржЦржи рж░рзЗржирзНржбрж╛рж░ рж╣рзЯ, рждржЦржи рж╕рзЗ ржирж┐ржЬрзЗрж░ state ржЕржирзБржпрж╛рзЯрзА UI рждрзИрж░рж┐ ржХрж░рзЗред

---

## ЁЯФ╣ ржХрзЗржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐?

React Component-ржПрж░ UI рж╕рж╛ржзрж╛рж░ржгржд рждрж╛рж░ ржирж┐ржЬрж╕рзНржм state-ржПрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗред ржпржЦржи state ржкрж░рж┐ржмрж░рзНрждржи рж╣рзЯ, React ржЖржмрж╛рж░ Component рж░рзЗржирзНржбрж╛рж░ ржХрж░рзЗ ржПржмржВ ржирждрзБржи UI ржжрзЗржЦрж╛рзЯред

---

## тЬЕ ржЙржжрж╛рж╣рж░ржг:

```jsx
import { useState } from "react";

function Counter() {
  const [count, setCount] = useState(0);

  return (
    <div>
      <p>Count: {count}</p>
      <button onClick={() => setCount(count + 1)}>Increase</button>
    </div>
  );
}
```

тЮбя╕П ржПржЦрж╛ржирзЗ `count` рж╣ржЪрзНржЫрзЗ state variable, ржПржмржВ `setCount` рж╣ржЪрзНржЫрзЗ рж╕рзЗржЗ state ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ ржЬржирзНржп ржПржХржЯрж┐ update functionред

---

## ЁЯУ╕ State ржХрзЗржи Snapshot рж╣рж┐рж╕рзЗржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?

React ржП state ржХрзЗ ржмрж▓рж╛ рж╣рзЯ **Snapshot**, ржХрж╛рж░ржг:

- ржкрзНрж░рждрж┐ржмрж╛рж░ ржпржЦржи Component рж░рзЗржирзНржбрж╛рж░ рж╣рзЯ, рж╕рзЗржЗ ржорзБрж╣рзВрж░рзНрждрзЗрж░ state ржПрж░ ржПржХржЯрж┐ ржХржкрж┐ (ржЕржмрж╕рзНржерж╛) ржирж┐ржпрж╝рзЗ ржХрж╛ржЬ ржХрж░рж╛ рж╣ржпрж╝ред
- ржЖржкржирж┐ ржпржжрж┐ `setCount(count + 1)` ржХрж░рзЗржи, рждрж╛рж╣рж▓рзЗ React ржкрзНрж░ржержорзЗ ржПржХржЯрж╛ ржирждрзБржи state value рждрзИрж░рж┐ ржХрж░рзЗ, рждрж╛рж░ржкрж░ ржкрзВрж░рзНржмрзЗрж░ state ржПржмржВ ржирждрзБржи state-ржПрж░ ржоржзрзНржпрзЗ ржкрж╛рж░рзНржержХрзНржп ржжрзЗржЦрзЗ Component ржкрзБржирж░рж╛рзЯ рж░рзЗржирзНржбрж╛рж░ ржХрж░рзЗред

> ржПржЯрж╛ ржарж┐ржХ ржпрзЗржирзЛ React ржкрзНрж░рждрж┐ржмрж╛рж░ component ржХрзЗ рж░рзЗржирзНржбрж╛рж░ ржХрж░рж╛рж░ рж╕ржорзЯ рждрж╛рж░ ржПржХржЯрж╛ тАЬржЫржмрж┐тАЭ (snapshot) рждрзБрж▓рзЗ рж░рж╛ржЦрзЗ, ржПржмржВ рж╕рзЗржЗ ржЫржмрж┐ ржЕржирзБржпрж╛рзЯрзА UI рждрзИрж░рж┐ ржХрж░рзЗред

---

## ЁЯФД рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ:

> **"State ржорж╛ржирзЗ ржПржХржЯрж╛ Component ржПрж░ ржорзБрж╣рзВрж░рзНрждрзЗрж░ ржЕржмрж╕рзНржерж╛ред ржкрзНрж░рждрж┐ржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░ рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ, React рж╕рзЗржЗ рж╕ржорзЯржХрж╛рж░ State ржПрж░ ржПржХржЯрж╛ ржХржкрж┐ ржирж┐ржпрж╝рзЗ ржХрж╛ржЬ ржХрж░рзЗтАФржПржХрзЗржЗ ржмрж▓рзЗ Snapshotред"**

---

## ЁЯза ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржорждрзЛ ржмрж┐рж╖рзЯ:

- State рж╢рзБржзрзБржорж╛рждрзНрж░ Component-ржПрж░ ржнрзЗрждрж░ ржерзЗржХрзЗ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛ ржпрж╛ржпрж╝ред
- ржкрзНрж░рждрж┐ржмрж╛рж░ `setState()` ржХрж░рж▓рзЗ Component рж░рж┐-рж░рзЗржирзНржбрж╛рж░ рж╣ржпрж╝ред
- ржкрзНрж░рждрзНржпрзЗржХржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░ ржХрж░рж╛рж░ рж╕ржорзЯ ржирждрзБржи snapshot рждрзИрж░рж┐ рж╣рзЯ, ржЖржЧрзЗрж░ржЯрж╛ ржЖрж░ ржХрж╛ржЬ ржХрж░рзЗ ржирж╛ред

---

## ЁЯФ╢ State as Array

React-ржП ржпржжрж┐ ржПржХрж╛ржзрж┐ржХ item рж░рж╛ржЦрждрзЗ рж╣ржпрж╝, ржпрзЗржоржи ржПржХржЯрж┐ to-do list, рждрж╛рж╣рж▓рзЗ array ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝ред

### тЬЕ ржЙржжрж╛рж╣рж░ржг:

```jsx
function TodoList() {
  const [tasks, setTasks] = useState(["ржШрзБржо", "ржЦрж╛ржУржпрж╝рж╛"]);

  const addTask = () => {
    setTasks([...tasks, "React рж╢рзЗржЦрж╛"]); // ржкрзБрж░рж╛ржирзЛ array рж░рзЗржЦрзЗ ржирждрзБржиржЯрж╛ ржпрзЛржЧ ржХрж░ржЫрж┐
  };

  return (
    <div>
      {tasks.map((task, index) => (
        <p key={index}>{task}</p>
      ))}
      <button onClick={addTask}>ржирждрзБржи Task ржпрзЛржЧ ржХрж░рзЛ</button>
    </div>
  );
}
```

ЁЯУМ **Note**:

- `...tasks` ржжрзНржмрж╛рж░рж╛ ржЖржЧрзЗрж░ рж╕ржорж╕рзНржд task ржХржкрж┐ ржХрж░рж╛ рж╣рзЯред
- рждрж╛рж░ржкрж░ `"React рж╢рзЗржЦрж╛"` ржирждрзБржи ржЖржЗржЯрзЗржо рж╣рж┐рж╕рзЗржмрзЗ ржпрзБржХрзНржд рж╣рзЯред
- ржПржЗржнрж╛ржмрзЗ **immutable** ржнрж╛ржмрзЗ array ржЖржкржбрзЗржЯ ржХрж░рж╛ рж╣ржпрж╝ред

---

## ЁЯФ╢ State as Object

ржпржЦржи ржПржХржЯрж┐ state ржЕржирзЗржХржЧрзБрж▓рзЛ related property ржзрж╛рж░ржг ржХрж░рзЗ, рждржЦржи object ржмрзНржпржмрж╣рзГржд рж╣рзЯред

### тЬЕ ржЙржжрж╛рж╣рж░ржг:

```jsx
function UserProfile() {
  const [user, setUser] = useState({ name: "рж░рж╛ржлрж╕рж╛ржи", age: 25 });

  const updateName = () => {
    setUser({ ...user, name: "рж░рж╛ржлрж┐" }); // ржЖржЧрзЗрж░ рж╕ржм рждржерзНржп рж░рзЗржЦрзЗ ржирж╛ржо ржкрж░рж┐ржмрж░рзНрждржи
  };

  return (
    <div>
      <p>ржирж╛ржо: {user.name}</p>
      <p>ржмрзЯрж╕: {user.age}</p>
      <button onClick={updateName}>ржирж╛ржо ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЛ</button>
    </div>
  );
}
```

ЁЯУМ **Note**:

- `...user` ржжрж┐рзЯрзЗ ржЖржЧрзЗрж░ рж╕ржм property ржХржкрж┐ ржХрж░рж┐ред
- рж╢рзБржзрзБржорж╛рждрзНрж░ `name` overwrite ржХрж░рж┐ред
- ЁЯУЫ ржпржжрж┐ `...user` ржирж╛ ржжрж┐ржЗ, рждрж╛рж╣рж▓рзЗ `age` рж╣рж╛рж░рж┐ржпрж╝рзЗ ржпрж╛ржмрзЗред

---

## ЁЯФ╢ Derived State

**Derived state** рж╣рж▓ ржПржоржи ржХрзЛржирзЛ ржнрзНржпрж╛рж▓рзБ ржпрж╛ ржЖржорж░рж╛ ржЕржирзНржп state ржмрж╛ props ржжрзЗржЦрзЗ ржЧржгржирж╛ ржХрж░рзЗ ржерж╛ржХрж┐ред

### тЬЕ ржЙржжрж╛рж╣рж░ржг:

```jsx
function Cart({ items }) {
  // items: [{ name: "Book", price: 100 }, { name: "Pen", price: 20 }]
  const total = items.reduce((sum, item) => sum + item.price, 0);

  return (
    <div>
      <h3>ржорзЛржЯ ржжрж╛ржо: {total} ржЯрж╛ржХрж╛</h3>
    </div>
  );
}
```

ЁЯУМ ржПржЦрж╛ржирзЗ `total` рж╣рж▓ **derived value**, ржХрж╛рж░ржг ржПржЯрж╛ `items` ржерзЗржХрзЗ рж╣рж┐рж╕рзЗржм ржХрж░рж╛ред

---

тЭМ ржХржЦржи derived state ржЖрж▓рж╛ржжрж╛ ржХрж░рзЗ рж░рж╛ржЦрж╛ ржЙржЪрж┐ржд ржирж╛?

```jsx
// ржнрзБрж▓ ржкржжрзНржзрждрж┐:
const [total, setTotal] = useState(0);

// рждрж╛рж░ржкрж░ useEffect ржжрж┐ржпрж╝рзЗ update ржХрж░рзЛ:
useEffect(() => {
  setTotal(items.reduce((sum, item) => sum + item.price, 0));
}, [items]);
```

ЁЯСЙ ржПржЗ ржХрзЛржб ржХрж╛ржЬ ржХрж░ржмрзЗ ржарж┐ржХржЗ, ржХрж┐ржирзНрждрзБ **extra state ржПржмржВ effect** ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржжрж░ржХрж╛рж░ ржирзЗржЗред рждрж╛ржЗ ржЧржгржирж╛ ржпрзЛржЧрзНржп ржорж╛ржи (derived value) ржХржЦржиржУ ржЕрждрж┐рж░рж┐ржХрзНржд ржХрж░рзЗ useState рждрзЗ рж░рж╛ржЦрж╛ ржЙржЪрж┐ржд ржиржпрж╝ред

---

## ЁЯза ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржЯрж┐ржкрж╕:

| ржзрж░ржи       | ржХржЦржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржм                  | ржЖржкржбрзЗржЯ ржХрж░рж╛рж░ ржЙржкрж╛ржпрж╝                  |
| --------- | -------------------------------- | --------------------------------- |
| Primitive | ржЫрзЛржЯ/рж╕рж░рж▓ ржорж╛ржи ржпрзЗржоржи counter         | `setState(newValue)`              |
| Array     | Task list, notifications ржЗрждрзНржпрж╛ржжрж┐ | `setArray([...prev, newItem])`    |
| Object    | User data, ржлрж░рзНржорзЗрж░ input ржЧрзБрж▓рзЛ     | `setObj({ ...prev, updatedKey })` |
| Derived   | ржЕржирзНржп state ржерзЗржХрзЗ ржЧржгржирж╛ ржХрж░рж╛ ржорж╛ржи     | ржЖрж▓рж╛ржжрж╛ ржХрж░рзЗ рж░рж╛ржЦрж╛ ржжрж░ржХрж╛рж░ ржирзЗржЗ          |

---

## ЁЯФЪ ржЙржкрж╕ржВрж╣рж╛рж░:

**State** рж╣рж▓рзЛ ржПржоржи ржПржХржЯрж┐ рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА ржзрж╛рж░ржгрж╛ ржпрзЗржЯрж╛ component-ржПрж░ **data ржУ behavior** ржХрзЗ ржирж┐рзЯржирзНрждрзНрж░ржг ржХрж░рзЗред

тЬЕ State рж╕ржарж┐ржХржнрж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржорж╛ржзрзНржпржорзЗ:

- Component UI **ржбрж╛рзЯржирж╛ржорж┐ржХ** рж░рж╛ржЦрж╛ ржпрж╛рзЯ
- **Efficient** ржнрж╛ржмрзЗ data handle ржХрж░рж╛ ржпрж╛рзЯ
- **Performance** ржЙржирзНржиржд ржХрж░рж╛ ржпрж╛рзЯ
