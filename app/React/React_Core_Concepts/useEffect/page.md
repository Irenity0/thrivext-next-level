# 4. useEffect

---

React-ржП `useEffect` рж╣рж▓рзЛ ржПржХржЯрж┐ рж╣рзБржХ, ржпрзЗржЯрж┐ component рж░рзЗржирзНржбрж╛рж░ рж╣ржУржпрж╝рж╛рж░ ржкрж░ ржмрж╛ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрж┐ржЫрзБ state ржмрж╛ prop ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣рж▓рзЗ ржХрзЛржи ржХрж╛ржЬ ржЪрж╛рж▓рж╛рждрзЗ ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ред

ржПржЯрж┐ ржорзВрж▓ржд Side Effects ржкрж░рж┐ржЪрж╛рж▓ржирж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ред

ЁЯСЙ **Side Effect ржорж╛ржирзЗ:** ржПржоржи ржХрж╛ржЬ ржпрж╛ component-ржПрж░ ржнрж┐рждрж░рзЗ рж╕рж░рж╛рж╕рж░рж┐ UI-ржПрж░ рж░рзЗржирзНржбрж╛рж░рж┐ржВ-ржПрж░ ржЕржВрж╢ ржиржпрж╝, ржпрзЗржоржи:

- API Call
- Event Listener Setup
- Timer Set ржХрж░рж╛ (`setTimeout`, `setInterval`)
- ржбржХрзБржорзЗржирзНржЯ ржЯрж╛ржЗржЯрзЗрж▓ ржкрж░рж┐ржмрж░рзНрждржи
- DOM ржПрж░ рж╕рж╛ржерзЗ рж╕рж░рж╛рж╕рж░рж┐ ржХрж╛ржЬ ржХрж░рж╛

## ЁЯзй useEffect ржПрж░ ржЧржаржи

```jsx
useEffect(() => {
  // ржХрж╛ржЬ ржпрж╛ ржХрж░рждрзЗ рж╣ржмрзЗ
  return () => {
    // Optional: Cleanup ржХрзЛржб (unmount ржПрж░ рж╕ржорзЯ)
  };
}, [dependency1, dependency2]);
```

## ЁЯЯб ржорж╛ржЙржирзНржЯ (Mount) ржПржмржВ ржЖржиржорж╛ржЙржирзНржЯ (Unmount) ржмрзНржпрж╛ржЦрзНржпрж╛

### ЁЯФ╣ Component Mount:

ржпржЦржи ржПржХржЯрж┐ Component ржкрзНрж░ржержоржмрж╛рж░ DOM-ржП ржпрзЛржЧ рж╣рзЯ, рждржЦржи ржмрж▓рзЗ Mount рж╣рзЯрзЗржЫрзЗред

**useEffect ржХржЦржи ржЪрж╛рж▓рж╛ржмрзЗ:** ржпржжрж┐ dependency array ржЦрж╛рж▓рж┐ ржерж╛ржХрзЗ `[]`, рждрж╛рж╣рж▓рзЗ effect рж╢рзБржзрзБржорж╛рждрзНрж░ ржкрзНрж░ржержоржмрж╛рж░ ржЪрж▓ржмрзЗред

```jsx
useEffect(() => {
  console.log("Component Mounted");
}, []); // рж╢рзБржзрзБржорж╛рждрзНрж░ ржкрзНрж░ржержоржмрж╛рж░
```

### ЁЯФ╣ Component Unmount:

ржпржЦржи component DOM ржерзЗржХрзЗ рж╕рж░рж┐рзЯрзЗ ржлрзЗрж▓рж╛ рж╣рзЯ, рждржЦржи рждрж╛ржХрзЗ ржмрж▓рзЗ Unmountред ржПржЗ рж╕ржорзЯ Cleanup Function ржЪрж╛рж▓рж╛ржирзЛ рж╣рзЯред

```jsx
useEffect(() => {
  const timer = setInterval(() => {
    console.log("Running...");
  }, 1000);

  return () => {
    clearInterval(timer); // Unmount рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ ржмржирзНржз ржХрж░рзЗ ржжрж┐ржЪрзНржЫрж┐
    console.log("Component Unmounted");
  };
}, []);
```

---

## ЁЯзк Dependency Array-ржПрж░ ржмрзНржпржмрж╣рж╛рж░

- `[]` ЁЯСЙ рж╢рзБржзрзБржорж╛рждрзНрж░ Component ржорж╛ржЙржирзНржЯ рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ effect ржЪрж╛рж▓рж╛ржмрзЗред
- `[count]` ЁЯСЙ ржкрзНрж░рждрж┐ржмрж╛рж░ `count` ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ effect ржЪрж╛рж▓рж╛ржмрзЗред
- `undefined` (ржХрж┐ржЫрзБ ржирж╛ ржжрж┐рж▓рзЗ) ЁЯСЙ ржкрзНрж░рждрж┐ржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░ рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ effect ржЪрж╛рж▓рж╛ржмрзЗред

```jsx
useEffect(() => {
  console.log("Every render"); // dependency array ржирж╛ржЗ, рждрж╛ржЗ рж╕ржм рж░рзЗржирзНржбрж╛рж░рзЗ ржЪрж╛рж▓рж╛ржмрзЗ
});

useEffect(() => {
  console.log("Only on mount"); // ржЦрж╛рж▓рж┐ array
}, []);

useEffect(() => {
  console.log("Runs when count changes");
}, [count]); // ржирж┐рж░рзНржжрж┐рж╖рзНржЯ dependency
```

---

## тЬЕ ржмрж╛рж╕рзНрждржм ржЙржжрж╛рж╣рж░ржг (API Call)

```jsx
import { useEffect, useState } from "react";

function User() {
  const [user, setUser] = useState(null);

  useEffect(() => {
    fetch("https://api.example.com/user")
      .then((res) => res.json())
      .then((data) => setUser(data));
  }, []); // ржЦрж╛рж▓рж┐ array ржорж╛ржирзЗ, Component ржорж╛ржЙржирзНржЯ рж╣рж▓рзЗ ржПржХржмрж╛рж░ржЗ API call рж╣ржмрзЗ

  return user ? <p>{user.name}</p> : <p>Loading...</p>;
}
```

---

## ЁЯза ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржорждрзЛ ржкржпрж╝рзЗржирзНржЯ

| ржмрж┐рж╖рзЯ                            | ржмрзНржпрж╛ржЦрзНржпрж╛                                                     |
| ------------------------------- | ------------------------------------------------------------ |
| `useEffect(() => {...}, [])`    | рж╢рзБржзрзБ ржорж╛ржЙржирзНржЯрзЗрж░ рж╕ржорзЯ ржЪрж╛рж▓рж╛рзЯ                                      |
| `useEffect(() => {...})`        | ржкрзНрж░рждрж┐ржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░ рж╣рж▓рзЗ ржЪрж╛рж▓рж╛рзЯ                                   |
| `useEffect(() => {...}, [dep])` | ржирж┐рж░рзНржжрж┐рж╖рзНржЯ state ржмрж╛ prop ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣рж▓рзЗ ржЪрж╛рж▓рж╛рзЯ                  |
| `return () => {...}`            | component unmount ржмрж╛ dependency ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ рж╕ржорзЯ cleanup ржЪрж╛рж▓рж╛рзЯ |

---

## ЁЯФЪ ржЙржкрж╕ржВрж╣рж╛рж░:

- `useEffect` рж╣ржЪрзНржЫрзЗ Side Effects ржкрж░рж┐ржЪрж╛рж▓ржирж╛рж░ ржкрзНрж░ржзрж╛ржи ржЙржкрж╛рзЯ React-ржПред
- ржПржЯрж┐ component lifecycle ржмрзБржЭрждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ (Mount, Update, Unmount)ред
- рж╕ржарж┐ржХржнрж╛ржмрзЗ dependency array ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ performance ржЙржирзНржиржд рж╣рзЯ ржПржмржВ ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ effect ржПрзЬрж╛ржирзЛ ржпрж╛рзЯред
